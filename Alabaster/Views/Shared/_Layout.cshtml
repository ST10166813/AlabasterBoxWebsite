@* @using Microsoft.AspNetCore.Http

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"]</title>

    <!-- Bootstrap & site styles -->
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/Alabaster.styles.css" asp-append-version="true" />

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />

    <style>
        /* Global 80% scaling */
        html {
            font-size: 80%; /* scales all text, buttons, inputs */
        }
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            margin: 0;
        }
.page-wrapper {
    flex: 1;
    zoom: 0.8; /* ✅ visually scales but doesn't break layout */
    width: 100%;
}


        /* Navbar */
        .navbar {
            background: linear-gradient(90deg, #111, #222);
            padding: 0.75rem 1rem;
        }
        .nav-link {
            color: white !important;
            font-weight: 500;
            font-size: 1rem;
            text-decoration: none !important;
            transition: all 0.3s ease;
        }
        .nav-link:hover {
            color: #e1a10d !important;
        }
/* Hamburger Icon */
.hamburger-icon {
    font-size: 2rem; /* bigger */
    cursor: pointer;
    color: #ffffff; /* golden yellow */
    transition: transform 0.3s ease, color 0.3s ease;
}

.hamburger-icon:hover {
    transform: scale(1.15);
    color: #fff; /* optional hover highlight */
}


        /* Scrolling Saying */
        .navbar-saying-container {
            position: absolute;
            left: 2rem;
            right: 10rem;
            overflow: hidden;
            height: 100%;
            display: flex;
            align-items: center;
        }
        .navbar-saying {
            color: hsl(42, 100%, 50%);
            font-style: italic;
            white-space: nowrap;
            font-size: 1rem;
            animation: floatRight 39s linear infinite;
        }
        @@keyframes floatRight {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(calc(100% + 100vw)); }
        }

        /* Side Drawer */
        .side-drawer {
            height: 100%;
            width: 0;
            position: fixed;
            z-index: 1050;
            top: 0;
            left: 0;
            background: linear-gradient(180deg, #1a1a1a, #2c2c2c);
            box-shadow: 4px 0 15px rgba(0,0,0,0.5);
            overflow-x: hidden;
            transition: width 0.4s ease;
            border-radius: 0 0.5rem 0.5rem 0;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .side-drawer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: linear-gradient(90deg, #ffb400, #ff9900);
            color: #111;
            font-size: 1rem;
            font-weight: bold;
        }
        .side-drawer .close-btn {
            font-size: 1.5rem;
            cursor: pointer;
            color: #111;
        }
        .menu-links {
            flex-grow: 1;
            overflow-y: auto;
            padding: 0.5rem 0;
        }
        .menu-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            color: #f1f1f1;
            text-decoration: none;
            background: rgba(255, 255, 255, 0.05);
            margin: 0.5rem 0.75rem;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
        }
        .menu-item i {
            font-size: 1.2rem;
        }
        .menu-item:hover {
            background-color: #ffb400;
            color: #111;
            transform: translateX(0.25rem);
        }
        .drawer-logo {
            position: relative; 
            margin-top: auto;  
            text-align: center;
            padding: 1rem 0;    
        }
        .drawer-logo img {
            max-width: 80%;     
            height: auto;
            border-radius: 0.5rem;
            box-shadow: 0 3px 8px rgba(0,0,0,0.3);
        }

        /* Overlay */
        .overlay {
            position: fixed;
            display: none;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1040;
        }

        /* Footer Styling */
        .footer {
            width: 100%;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(90deg, #111, #222);
            font-size: 1rem;
            color: #fff;
            margin-top: auto;
        }

        /* Fix username text height */
        .navbar .user-email {
            font-size: 1rem; 
            line-height: 1;
            display: inline-block;
        }
    </style>

    @RenderSection("Styles", required: false)
</head>
<body>
    <header>
        <nav class="navbar navbar-dark px-3">
            <span class="hamburger-icon" onclick="openDrawer()">&#9776;</span>
            <div class="navbar-saying-container">
                <span class="navbar-saying">
                    Then Jesus said to them, "So wherever you go in the world, tell everyone the Good News."
                </span>
            </div>

            <ul class="navbar-nav ms-auto flex-row gap-3">
                @if (Context.Session.GetString("FirebaseToken") != null)
                {
                    <li class="nav-item d-flex align-items-center text-white me-2">
                        <i class="bi bi-person-circle"></i>
                        @{
    var displayName = Context.Session.GetString("UserName") ?? "User";
}
<span class="ms-1 user-email">@displayName</span>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Auth" asp-action="Logout">
                            <i class="bi bi-box-arrow-right"></i> Logout
                        </a>
                    </li>
                }
                else
                {
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Auth" asp-action="Login">
                            <i class="bi bi-box-arrow-in-right"></i> Login
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-controller="Auth" asp-action="Register">
                            <i class="bi bi-person-plus"></i> Register
                        </a>
                    </li>
                }
            </ul>
        </nav>
    </header>

    <div id="sideDrawer" class="side-drawer">
        <div>
            <div class="side-drawer-header">
                Menu
                <span class="close-btn" onclick="closeDrawer()">&times;</span>
            </div>
            <div class="menu-links">
                <a class="menu-item" asp-controller="Home" asp-action="Index"><i class="bi bi-house-door"></i> Home</a>
                <a class="menu-item" asp-controller="AboutUs" asp-action="Index"><i class="bi bi-info-circle"></i> About Us</a>
                <a class="menu-item" asp-controller="Events" asp-action="Index"><i class="bi bi-calendar-event"></i> Events</a>
                <a class="menu-item" asp-controller="Events" asp-action="Volunteer"><i class="bi bi-people"></i> Volunteer</a>
                <a class="menu-item" asp-controller="Testimonies" asp-action="Index"><i class="bi bi-chat-quote"></i> Testimonies</a>
                <a class="menu-item" asp-controller="Donate" asp-action="Index"><i class="bi bi-heart"></i> Donate</a>
                <a class="menu-item" asp-controller="Prayer" asp-action="Index"><i class="bi bi-journal"></i> Prayer</a>

                @if (Context.Session.GetString("IsAdmin") == "true")
                {
                    <a class="menu-item" asp-controller="Prayer" asp-action="AdminView">
                        <i class="bi bi-shield-lock"></i> Prayer Requests (Admin)
                    </a>
                    <a class="menu-item" asp-controller="Events" asp-action="ManageVolunteers">
                        <i class="bi bi-person-badge"></i> Manage Volunteers (Admin)
                    </a>
                                        <a class="menu-item" asp-controller="Testimonies" asp-action="Admin">
                        <i class="bi bi-person-badge"></i> Manage Testimonies (Admin)
                    </a>
                }
            </div>
        </div>
        <div class="drawer-logo">
            <img src="~/Images/logo.jpg" alt="Logo" />
        </div>
    </div>

    <div id="menuOverlay" class="overlay" onclick="closeDrawer()"></div>

    <div class="page-wrapper">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </div>

<footer class="footer">
    <div class="footer-container" style="color:white;">
        © 2025 Alabaster Box Anointing Ministries — All rights reserved
    </div>
</footer>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
    <script type="module" src="~/js/firebase-init.js"></script>

    <script>
        function openDrawer() {
            document.getElementById("sideDrawer").style.width = "340px";
            document.getElementById("menuOverlay").style.display = "block";
        }
        function closeDrawer() {
            document.getElementById("sideDrawer").style.width = "0";
            document.getElementById("menuOverlay").style.display = "none";
        }
    </script>
</body>
</html> *@

@using Microsoft.AspNetCore.Http
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>@ViewData["Title"]</title>

  <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
  <link rel="stylesheet" href="~/Alabaster.styles.css" asp-append-version="true" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Lexend+Giga:wght@400;500;600;700;800&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    /* =================== GLOBAL =================== */
    html, body {
      margin:0; padding:0; width:100%; min-height:100%;
      overflow-x:hidden; overflow-y:auto; background:transparent !important;
    }
    body{
      font-family:"Lexend Giga","Poppins",system-ui,sans-serif;
      background:url('../images/cross7.png') center -10% / cover no-repeat fixed;
      color:#fff; position:relative;
    }

    /* Hide any old nav/footer */
    .navbar, footer, .footer, .bottom-nav{ display:none !important; }

    /* =================== FULLSCREEN SPLINE =================== */
    spline-viewer{
      position:fixed; inset:0; width:100vw; height:100vh; z-index:-2; /* put Spline behind particles */
      border:none; object-fit:cover; background:transparent !important; pointer-events:auto;
    }
    spline-viewer::part(branding){ display:none !important; }

    /* =================== GLOBAL PARTICLES =================== */
    #particles {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 0; /* above Spline, below content */
    }
    .particle {
      position: absolute;
      background: rgba(247, 246, 244, 0.8);
      border-radius: 50%;
      filter: blur(2px);
      animation: float 12s linear infinite;
      will-change: transform, opacity;
    }
    @@keyframes float {
      0%   { transform: translateY(100vh) translateX(0) rotate(0deg);   opacity: 0; }
      10%  { opacity: 1; }
      100% { transform: translateY(-10vh) translateX(50vw) rotate(360deg); opacity: 0; }
    }

    /* =================== TOP STRIP (unchanged layout) =================== */
    .top-words{
      position:fixed; top:40px; left:50%; transform:translateX(-50%);
      display:flex; gap:clamp(18px,4vw,70px); z-index:2; font-weight:600; text-transform:uppercase;
    }
    .top-words a{ color:#f1f1f1; text-decoration:none; transition:opacity .2s, transform .15s; }
    .top-words a:hover{ opacity:1; transform:translateY(-1px); }

    .auth-links{
      position:fixed; top:40px; right:20px; z-index:3; display:flex; gap:16px;
      align-items:center; font-weight:600; text-transform:uppercase;
    }
    .auth-links a, .auth-links span{ color:#f1f1f1; text-decoration:none; transition:opacity .2s; }
    .auth-links a:hover{ opacity:1; }

    .page-wrapper{
      position:relative; z-index:1; width:100%; min-height:100vh; padding-top:100px;
      background:transparent !important;
    }

    /* =========================================================
       BLACK GLASS HAMBURGER (interface-only change)
       ========================================================= */
    .hamburger-icon{
      position:fixed; top:18px; left:18px; z-index:1055;
      display:inline-flex; align-items:center; justify-content:center;
      width:56px; height:56px; border-radius:14px; cursor:pointer; user-select:none;

      /* black glass */
      background:linear-gradient(180deg, rgba(10,10,12,.82), rgba(18,18,22,.72));
      border:1px solid rgba(255,255,255,.12);
      -webkit-backdrop-filter: blur(14px) saturate(140%);
      backdrop-filter: blur(14px) saturate(140%);
      box-shadow:
        0 10px 28px rgba(0,0,0,.45),
        inset 0 1px 0 rgba(255,255,255,.06);

      color:#f5f5f5; font-size:0; /* hide glyph, we’ll draw lines */
      transition: transform .15s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
    }
    .hamburger-icon::before, .hamburger-icon::after{
      content:""; position:absolute; width:26px; height:2px; border-radius:2px; background:rgba(255,255,255,.92);
      box-shadow: 0 7px 0 0 rgba(255,255,255,.92), 0 -7px 0 0 rgba(255,255,255,.92);
    }
    .hamburger-icon:hover{
      transform:scale(1.05);
      border-color:rgba(255,255,255,.18);
      box-shadow:0 14px 36px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.1);
    }
    .hamburger-icon:active{ transform:scale(.98); }

    /* =========================================================
       SIDE DRAWER — TRUE BLACK GLASS
       ========================================================= */
    .side-drawer{
      position:fixed; top:0; left:0; height:100dvh; width:0; z-index:1100; overflow:hidden;
      transition:width .35s ease;
      /* black glass gradient + blur */
      background:linear-gradient(180deg, rgba(10,10,12,.86), rgba(16,16,20,.78) 40%, rgba(10,10,12,.86));
      -webkit-backdrop-filter: blur(18px) saturate(150%);
      backdrop-filter: blur(18px) saturate(150%);
      border-right:1px solid rgba(255,255,255,.12);
      box-shadow:6px 0 42px rgba(0,0,0,.45);
      border-radius:0 16px 16px 0;

      display:grid; grid-template-rows:auto 1fr auto;
    }

    /* Header becomes glass too */
    .side-drawer-header{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 16px;
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border-bottom:1px solid rgba(255,255,255,.12);
      color:#f1f1f1; font-weight:800; letter-spacing:.3px;
      box-shadow: 0 6px 28px rgba(0,0,0,.25);
    }
    .close-btn{
      display:inline-flex; align-items:center; justify-content:center;
      width:40px; height:40px; border-radius:10px; cursor:pointer;
      background:rgba(255,255,255,.08); color:#f1f1f1; border:1px solid rgba(255,255,255,.14);
      transition: transform .15s ease, background .2s ease, border-color .2s ease;
    }
    .close-btn:hover{ transform:scale(1.05); background:rgba(255,255,255,.14); border-color:rgba(255,255,255,.2); }

    /* Scroll area */
    .menu-links{ overflow-y:auto; padding:10px 10px 16px; }
    .drawer-section{ padding:8px 12px; margin:6px 6px 2px; font-size:.8rem; letter-spacing:.5px; color:rgba(255,255,255,.72); text-transform:uppercase; font-weight:700; }

    /* Items as glass pills */
    .menu-item{
      display:flex; align-items:center; gap:10px; padding:12px 14px; margin:6px 6px;
      border-radius:12px; color:#f1f1f1; text-decoration:none;

      background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.1);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
      transition: transform .15s ease, background .2s ease, border-color .2s ease, box-shadow .2s ease, color .2s ease;
    }
    .menu-item i{ opacity:.9; }

    .menu-item:hover{
      transform: translateX(4px);
      background:linear-gradient(180deg, rgba(255,255,255,.16), rgba(255,255,255,.06));
      border-color:rgba(255,255,255,.18);
      box-shadow:0 10px 26px rgba(0,0,0,.35);
      color:#fff;
    }

    /* Active state (optional) */
    .menu-item.active{
      border-color:rgba(255,215,0,.42);
      box-shadow:
        0 0 0 3px rgba(255,215,0,.12) inset,
        0 14px 36px rgba(0,0,0,.45);
    }

    /* Drawer footer / logo on glass */
    .drawer-logo{
      padding:16px; text-align:center; border-top:1px solid rgba(255,255,255,.12);
      background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
    }
    .drawer-logo img{
      display:block; margin:0 auto; max-width:72%; border-radius:12px;
    }

    /* Overlay gets subtle blur too */
    .overlay{
      position:fixed; inset:0; z-index:1090; display:none;
      background:rgba(0,0,0,.45);
      -webkit-backdrop-filter: blur(2px);
      backdrop-filter: blur(2px);
    }

    /* =================== RESPONSIVE TWEAKS =================== */
    @@media (max-width:640px){
      .hamburger-icon{ width:52px; height:52px; }
    }
  </style>

  @RenderSection("Styles", required: false)
</head>
<body>
  <!-- Spline Background -->
  <script type="module" src="https://unpkg.com/@@splinetool/viewer@1.10.85/build/spline-viewer.js"></script>
  <spline-viewer loading-anim-type="none" url="https://prod.spline.design/IklUESOTGHIJ0hhn/scene.splinecode"></spline-viewer>

  <!-- Global Particles Layer -->
  <div id="particles" aria-hidden="true"></div>

  <!-- Black-glass hamburger (no logic change) -->
  <button class="hamburger-icon" aria-label="Open menu" onclick="openDrawer()"></button>

  <!-- Center words (unchanged) -->
  <nav class="top-words" aria-label="Primary">
    <a href="/">Home</a>
    <a href="/AboutUs">About Us</a>
    <a href="/Events">Events</a>
    <a href="/Events/Volunteer">Volunteer</a>
    <a href="/Testimonies">Testimonies</a>
    <a href="/Home/Contact">Contact</a>

  </nav>

  <div class="auth-links">
    @if (Context.Session.GetString("FirebaseToken") != null)
    {
      var displayName = Context.Session.GetString("UserName") ?? "User";
      <span>@displayName</span>
      <a asp-controller="Auth" asp-action="Logout">Logout</a>
    }
    else
    {
      <a asp-controller="Auth" asp-action="Login">Login</a>
      <a asp-controller="Auth" asp-action="Register">Register</a>
    }
  </div>

  <!-- Side Drawer (glass) -->
  <div id="sideDrawer" class="side-drawer" aria-hidden="true" aria-label="App menu">
    <div class="side-drawer-header">
      <span>Menu</span>
      <button class="close-btn" aria-label="Close menu" onclick="closeDrawer()">
        <i class="bi bi-x-lg"></i>
      </button>
    </div>

    <div class="menu-links">
      <a class="menu-item" asp-controller="Home" asp-action="Index"><i class="bi bi-house-door"></i> Home</a>
      <a class="menu-item" asp-controller="AboutUs" asp-action="Index"><i class="bi bi-info-circle"></i> About Us</a>
      <a class="menu-item" asp-controller="Events" asp-action="Index"><i class="bi bi-calendar-event"></i> Events</a>
      <a class="menu-item" asp-controller="Events" asp-action="Volunteer"><i class="bi bi-people"></i> Volunteer</a>
      <a class="menu-item" asp-controller="Testimonies" asp-action="Index"><i class="bi bi-chat-quote"></i> Testimonies</a>
      <a class="menu-item" asp-controller="Donate" asp-action="Index"><i class="bi bi-heart"></i> Donate</a>
      <a class="menu-item" asp-controller="Prayer" asp-action="Index"><i class="bi bi-journal"></i> Prayer</a>

      @if (Context.Session.GetString("IsAdmin") == "true")
      {
        <a class="menu-item" asp-controller="Prayer" asp-action="AdminView">
    <i class="bi bi-journal-bookmark-fill"></i> Prayer Requests (Admin)
  </a>

  <a class="menu-item" asp-controller="Events" asp-action="ManageVolunteers">
    <i class="bi bi-people-fill"></i> Manage Volunteers (Admin)
  </a>
  
  <a class="menu-item" asp-controller="Testimonies" asp-action="Admin">
    <i class="bi bi-chat-heart-fill"></i> Manage Testimonies (Admin)
  </a>

      }
    </div>

    <div class="drawer-logo">
      <img src="~/Images/whitelogo.png" alt="Ministry Logo" />
    </div>
  </div>

  <div id="menuOverlay" class="overlay" onclick="closeDrawer()"></div>

  <!-- Page -->
  <div class="page-wrapper">
    <main role="main" class="pb-3">
      @RenderBody()
    </main>
  </div>

  <script src="~/lib/jquery/dist/jquery.min.js"></script>
  <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <script src="~/js/site.js" asp-append-version="true"></script>
  @await RenderSectionAsync("Scripts", required: false)
  <script type="module" src="~/js/firebase-init.js"></script>

  <script>
    /* =================== Drawer controls =================== */
    function openDrawer(){
      const drawer = document.getElementById('sideDrawer');
      const overlay = document.getElementById('menuOverlay');
      drawer.style.width = '340px';
      overlay.style.display = 'block';
      drawer.setAttribute('aria-hidden','false');
    }
    function closeDrawer(){
      const drawer = document.getElementById('sideDrawer');
      const overlay = document.getElementById('menuOverlay');
      drawer.style.width = '0';
      overlay.style.display = 'none';
      drawer.setAttribute('aria-hidden','true');
    }

    /* =================== Global Particles (init once) =================== */
    (function () {
      if (window.__particlesInit) return; // prevent duplicates
      window.__particlesInit = true;

      let container = document.getElementById('particles');
      if (!container) {
        container = document.createElement('div');
        container.id = 'particles';
        container.setAttribute('aria-hidden', 'true');
        document.body.prepend(container);
      }

      const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (prefersReduced) return; // respect user motion preference

      function createParticle() {
        const p = document.createElement('div');
        p.className = 'particle';
        const size = Math.random() * 6 + 2; // 2px–8px
        p.style.width = size + 'px';
        p.style.height = size + 'px';
        p.style.left = Math.random() * window.innerWidth + 'px';
        p.style.animationDuration = (5 + Math.random() * 10) + 's';
        // warm gold-ish variation
        p.style.background = 'rgba(255,215,0,' + (Math.random() * 0.6 + 0.3).toFixed(2) + ')';
        container.appendChild(p);
        setTimeout(() => p.remove(), 15000);
      }

      window.__particlesInterval = setInterval(createParticle, 150);
      window.addEventListener('pagehide', () => clearInterval(window.__particlesInterval));
    })();
  </script>
</body>
</html>
